!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},i=t.parcelRequire241c;null==i&&((i=function(e){if(e in n)return n[e].exports;if(e in a){var t=a[e];delete a[e];var i={id:e,exports:{}};return n[e]=i,t.call(i.exports,i,i.exports),i.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){a[e]=t},t.parcelRequire241c=i);var s=i("efgtE"),r=i("8MBJY"),o=i("a2hTj"),l=i("4Nugj"),c=function(){"use strict";function t(){e(r)(this,t),this.refs=l.refs}return e(o)(t,[{key:"show",value:function(){this.refs.spinner.classList.remove("is-hidden")}},{key:"hide",value:function(){this.refs.spinner.classList.add("is-hidden")}}]),t}(),u=i("37jAB"),d=i("j7yxE");i("4Nugj");var f=i("1VFfL"),m=(s=i("efgtE"),u=i("37jAB"),d=i("j7yxE"),l=i("4Nugj"),l=i("4Nugj"),new c);function g(){m.hide();l.refs.messageContainer.innerHTML='<p class="film-cards__error" data-key="responseError">Sorry, no response from server!</p>'}var v=new(0,s.default),p=new c;function h(t){var n=document.getElementById("pagination"),a={totalItems:t,itemsPerPage:20,visiblePages:5,page:1,centerAlign:!0,firstItemClassName:"tui-first-child",lastItemClassName:"tui-last-child",template:{page:'<a href="#" class="tui-page-btn">{{page}}</a>',currentPage:'<strong class="tui-page-btn tui-is-selected">{{page}}</strong>',moveButton:'<a href="#" class="tui-page-btn tui-{{type}}"><span class="tui-ico-{{type}}">{{type}}</span></a>',disabledMoveButton:'<span class="tui-page-btn tui-is-disabled tui-{{type}}"><span class="tui-ico-{{type}}">{{type}}</span></span>',moreButton:'<a href="#" class="tui-page-btn tui-{{type}}-is-ellip"><span class="tui-ico-ellip">...</span></a>'}},i=window.matchMedia("(max-width: 768px)");function s(e){e.matches&&(a.visiblePages=3)}i.addEventListener("change",s),s(i),new(e(f))(n,a).on("afterMove",(function(e){l.refs.homeCardsContainer.innerHTML="",p.show(),v.page=e.page,localStorage.setItem("page",v.page),v.fetchTrendingMovies().then((function(e){var t=e.results,n=(0,u.default)(t);p.hide(),(0,d.insertFilmsMarkupToHome)(n),localStorage.setItem("currentFilm",JSON.stringify(t))})).catch(g)}))}u=i("37jAB");var _=new(0,s.default),y=new c;_.fetchGenres().then((function(e){var t=e.genres,n=!0,a=!1,i=void 0;try{for(var s,r=t[Symbol.iterator]();!(n=(s=r.next()).done);n=!0){var o=s.value,l=o.id,c=o.name;localStorage.setItem("genre_".concat(l),c)}}catch(e){a=!0,i=e}finally{try{n||null==r.return||r.return()}finally{if(a)throw i}}})).catch((function(e){return console.log(e)})),y.show(),_.fetchTrendingMovies().then((function(e){var t=e.results,n=e.total_results,a=(0,u.default)(t);y.hide(),(0,d.insertFilmsMarkupToHome)(a),h(n),localStorage.setItem("currentFilm",JSON.stringify(t))})).catch(g),i("4uNB6");function b(e,t,n){var a,i,s,r,o;function l(){var c=Date.now()-r;c<t&&c>=0?a=setTimeout(l,t-c):(a=null,n||(o=e.apply(s,i),s=i=null))}null==t&&(t=100);var c=function(){s=this,i=arguments,r=Date.now();var c=n&&!a;return a||(a=setTimeout(l,t)),c&&(o=e.apply(s,i),s=i=null),o};return c.clear=function(){a&&(clearTimeout(a),a=null)},c.flush=function(){a&&(o=e.apply(s,i),s=i=null,clearTimeout(a),a=null)},c}b.debounce=b,i("4Nugj");s=i("efgtE"),l=i("4Nugj");new(0,s.default),l=i("4Nugj"),s=i("efgtE"),u=i("37jAB"),d=i("j7yxE"),f=i("1VFfL"),s=i("efgtE"),u=i("37jAB"),d=i("j7yxE"),l=i("4Nugj");var w=new(0,s.default),E=new c;function T(t,n){var a=document.getElementById("pagination"),i={totalItems:t,itemsPerPage:20,visiblePages:5,page:1,centerAlign:!0,firstItemClassName:"tui-first-child",lastItemClassName:"tui-last-child",template:{page:'<a href="#" class="tui-page-btn">{{page}}</a>',currentPage:'<strong class="tui-page-btn tui-is-selected">{{page}}</strong>',moveButton:'<a href="#" class="tui-page-btn tui-{{type}}"><span class="tui-ico-{{type}}">{{type}}</span></a>',disabledMoveButton:'<span class="tui-page-btn tui-is-disabled tui-{{type}}"><span class="tui-ico-{{type}}">{{type}}</span></span>',moreButton:'<a href="#" class="tui-page-btn tui-{{type}}-is-ellip"><span class="tui-ico-ellip">...</span></a>'}},s=window.matchMedia("(max-width: 768px)");function r(e){e.matches&&(i.visiblePages=3)}s.addEventListener("change",r),r(s),new(e(f))(a,i).on("afterMove",(function(e){l.refs.homeCardsContainer.innerHTML="",E.show(),w.page=e.page,w.query=n,w.fetchSearchingMovies().then((function(e){var t=e.results,n=(0,u.default)(t);E.hide(),(0,d.insertFilmsMarkupToHome)(n),localStorage.setItem("currentFilm",JSON.stringify(t))})).catch(g)}))}l=i("4Nugj");function L(){var e='<p class="search-form--badrequest">'.concat(function(){var e=localStorage.getItem("lang");if(!e||"en-US"===e)return"Search result not successful. Enter the correct movie name!";if("uk-UA"===e)return"Упс, нічого не знайдено. Введіть коректну назву фільма!"}(),"</p>");return l.refs.filmsSearchList.innerHTML=e,setTimeout((function(){return l.refs.filmsSearchList.innerHTML=""}),2e3)}var M=new(0,s.default),S=new c;l.refs.formSearch.addEventListener("submit",(function(e){e.preventDefault();var t=e.currentTarget.elements.searchInput.value.trim();if(!t)return console.log("Field cannot be empty");M.query=t,S.show();try{M.fetchSearchingMovies().then((function(e){var n=e.results,a=e.total_results;if(S.hide(),0!==n.length){l.refs.homeCardsContainer.innerHTML="";var i=(0,u.default)(n);(0,d.insertFilmsMarkupToHome)(i),T(a,t),localStorage.setItem("currentFilm",JSON.stringify(n))}else L()}))}catch(e){g()}l.refs.inputSearch.value="",l.refs.filmsSearchList.innerHTML="",l.refs.filmsSearchList.classList.remove("search-form__list--bgc")}));var N=i("iSn7Y");i("37jAB"),i("h7AsZ");l=i("4Nugj"),d=i("j7yxE");var C=i("cbazt"),k=i("3MGSC"),j=i("4uNB6"),x=i("4QKg3"),B=i("h7AsZ");l.refs.homeCardsContainer.addEventListener("click",(function(e){if("IMG"!==e.target.nodeName&&"DIV"!==e.target.nodeName&&"B"!==e.target.nodeName&&"H2"!==e.target.nodeName&&"P"!==e.target.nodeName)return;document.body.classList.add("show-modal"),window.addEventListener("keydown",O);var t=e.target.dataset.id,n=localStorage.getItem("currentFilm"),a=JSON.parse(n).find((function(e){return e.id==t})),i=(s=a,r="",r=s.poster_path?"".concat(x.BASE_POSTER_URL,"/").concat(s.poster_path):"https://raw.githubusercontent.com/marvall/filmoteka/main/src/images/no-poster.png",'<div class="movie__container--left-side">              \n                  <img class="movie__image" src="'.concat(r,'"\n                    alt="').concat(s.title||s.name,'" /></div>\n            <div class="movie__container--rigth-side">\n                <h2 class="movie__title">').concat(s.title||s.name,'</h2>\n                <table class="movie__info">\n                    <tbody>\n                        <tr class="movie__info-rows">\n                            <td class="movie__info-name" data-key="votes">Vote / Votes</td>\n                            <td class="movie__info-rating">\n                                <span class="movie__info-rating-value movie__info-rating--accent">').concat((0,B.setReleaseVote)(s.vote_average),'</span>\n                                <span class="movie__info-rating-slash">/</span>\n                                <span class="movie__info-rating-value">').concat((0,B.setReleaseVote)(s.vote_count),'</span>\n                            </td>\n                        </tr>\n                        <tr class="movie__info-rows">\n                            <td class="movie__info-name" data-key="popularity">Popularity</td>\n                            <td class="movie__info-numbers">').concat(s.popularity,'</td>\n                        </tr>\n                        <tr class="movie__info-rows">\n                            <td class="movie__info-name" data-key="originalTitle">Original Title</td>\n                            <td class="movie__info-value">').concat(s.original_title||s.original_name,'</td>\n                        </tr>\n                        <tr class="movie__info-rows movie__info-rows--last">\n                            <td class="movie__info-name" data-key="genre">Genre</td>\n                            <td class="movie__info-value">').concat((0,N.gettingGenresListForModal)(s.genre_ids)||"Genre not defined",'</td>\n                        </tr>\n                    </tbody>\n                </table>\n                <h2 class="movie__about-title" data-key="about">About</h2>\n                <p class="movie__about-text">\n                    ').concat(s.overview||"No text",'\n                </p>\n                <div class="movie__btn-container">\n                   \n                    <button type="submit" id="watched-btn" data-id="').concat(s.id,'" class="movie__btn btn btn--accent">ADD TO WATCHED\n                        </button>\n                    <button type="submit" id="queue-btn" data-id="').concat(s.id,'" class="movie__btn btn btn-queue">ADD TO QUEUE\n                        </button>\n                </div>\n            </div>\n        </div>'));var s,r;(0,k.translateItems)(".movie__container--rigth-side [data-key]"),(0,d.insertModalMarkupHome)(i);var o=document.querySelector("#watched-btn");o.addEventListener("click",(function(){"REMOVE FROM WATCHED"===o.textContent&&(o.textContent="ADD TO WATCHED"),(0,C.addWatchedLocalStorage)(a,o,A)}));var l=document.querySelector("#queue-btn");l.addEventListener("click",(function(){"REMOVE FROM QUEUE"===l.textContent&&(l.textContent="ADD TO QUEUE"),(0,C.addQueueLocalStorage)(a,l,A)})),(0,j.textModalBtn)(t)})),l.refs.closeModalBtn.addEventListener("click",I),l.refs.modalCardBackdrop.addEventListener("click",(function(e){e.currentTarget===e.target&&I()}));var A=l.refs.homeCardsContainer;function I(){window.removeEventListener("keydown",O),document.body.classList.remove("show-modal"),l.refs.modalCardContainer.innerHTML=""}function O(e){"Escape"===e.code&&I()}i("6IdhT"),i("ivF4K"),AOS.init(),i("3MGSC"),i("9PpgY");l=i("4Nugj");setTimeout((function(){l.refs.advertising.classList.add("is-visible")}),5e3),setTimeout((function(){l.refs.advertising.classList.remove("is-visible"),l.refs.advertising.classList.add("semi-visible")}),1e4)}();
//# sourceMappingURL=index.bfcada50.js.map
