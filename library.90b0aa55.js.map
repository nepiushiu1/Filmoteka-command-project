{"mappings":"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","sources":["src/library.js","src/js/api/loadModalCardLibrary.js"],"sourcesContent":["// CHANGE COLOR OF HEADER-BUTTONS\nimport './js/library-header-btns';\n\n// PAGINATION FOR A LIBRARY PAGE\nimport './js/pagination-library';\n\n//Усуває поимлку в консолі з модальним вікном\n// Якщо розкоментувати - буде помилка\n// CHANGE TEXT OF MODAL-BTNS\n// import './js/modal-btns';\n\n// OPEN MODAL CARD\nimport './js/api/loadModalCardLibrary';\n\n// MODAL IN FOOTER\nimport './js/modal-students';\n\n// scroll-up-btn\nimport './js/scroll-up-btn';\n\n// translate\nimport './js/translation';\n\n// change BG color\nimport './js/bg-color';\n\n","import { gettingGenresListForModal } from './gettingGenresList';\nimport { translateItems } from '../translation';\nimport makingMarkup from '../api/render-card-markup';\n// import MoviesApiService from './moviesApiServiceClass';\nimport { refs } from '../refs';\nimport { insertModalMarkupHome } from './insertingIntoDifferentContainers';\nimport {\n  addWatchedLocalStorage,\n  addQueueLocalStorage,\n  deleteQueue,\n  deleteWatched,\n} from '../local_storage';\nimport { textModalBtn } from '../modal-btns';\nimport { BASE_POSTER_URL } from '../api/constants/baseUrls';\nimport { setReleaseVote } from '../api/setReleaseDate';\n// const moviesApiService = new MoviesApiService();\n\nrefs.libraryCardsContainer.addEventListener('click', clickOnMovie);\nrefs.closeModalBtn.addEventListener('click', onCloseModalBtnClick);\nrefs.modalCardBackdrop.addEventListener('click', onModalCardBackdropClick);\n\n// Додано змінну для умови видалення фільму: головна сторінка чи бібліотека\nconst style = refs.homeCardsContainer;\n\nfunction clickOnMovie(e) {\n  if (\n    e.target.nodeName !== 'IMG' &&\n    e.target.nodeName !== 'DIV' &&\n    e.target.nodeName !== 'B' &&\n    e.target.nodeName !== 'H2' &&\n    e.target.nodeName !== 'P'\n  ) {\n    return;\n  }\n\n  document.body.classList.add('show-modal');\n  window.addEventListener('keydown', modalCloseByEsc);\n\n  const currentId = e.target.dataset.id;\n\n  const unParsedCurrentArrayFilmsW = localStorage.getItem('currentFilm');\n  const unParsedCurrentArrayFilmsQ = localStorage.getItem('currentFilm');\n\n  const parsedCurrentArrayFilmsW = JSON.parse(unParsedCurrentArrayFilmsW);\n  const parsedCurrentArrayFilmsQ = JSON.parse(unParsedCurrentArrayFilmsQ);\n\n  // console.log(parsedCurrentArrayFilms.find(obj => obj.id == currentId));\n  let libraryMovieWatched = parsedCurrentArrayFilmsW.find(\n    obj => obj.id == currentId\n  );\n  let libraryMovieQueue = parsedCurrentArrayFilmsQ.find(\n    obj => obj.id == currentId\n  );\n\n  const render = makingModalCardMarkup(\n    libraryMovieWatched || libraryMovieQueue\n  );\n  translateItems('.movie__container--rigth-side [data-key]');\n  insertModalMarkupHome(render);\n  ///////////////////////////////////////////////////////////////////////////\n  //** Код для запису об'єктів в LOCAL STORAGE */\n  const watchedBtn = document.querySelector('#watched-btn');\n  watchedBtn.addEventListener('click', () => {\n    let arrayFilmsWatched = [];\n    const w = localStorage.getItem('watched');\n    if (w) {\n      arrayFilmsWatched = JSON.parse(w);\n    }\n\n    // Перевірка на наявність об'єкта в масиві фільмів \"WATCHED\"\n    const isAddedFilm = arrayFilmsWatched.find(arr => arr.id == currentId);\n    isAddedFilm\n      ? deleteWatched(libraryMovieWatched)\n      : addWatchedLocalStorage(libraryMovieQueue, watchedBtn, style);\n    textModalBtn(currentId);\n  });\n\n  const queueBtn = document.querySelector('#queue-btn');\n  queueBtn.addEventListener('click', () => {\n    let arrayFilmsQueue = [];\n    const q = localStorage.getItem('queue');\n    if (q) {\n      arrayFilmsQueue = JSON.parse(q);\n    }\n\n    // Перевірка на наявність об'єкта в масиві фільмів \"QUEUE\"\n    const isAddedFilm = arrayFilmsQueue.find(arr => arr.id == currentId);\n    isAddedFilm\n      ? deleteQueue(libraryMovieQueue)\n      : addQueueLocalStorage(libraryMovieWatched, queueBtn, style);\n    textModalBtn(currentId);\n  });\n  /////////////////////////////////////////////////////////////////////////////\n  textModalBtn(currentId);\n}\n\nfunction onCloseModalBtnClick() {\n  window.removeEventListener('keydown', modalCloseByEsc);\n  document.body.classList.remove('show-modal');\n  refs.modalCardContainer.innerHTML = '';\n}\n\nfunction modalCloseByEsc(e) {\n  if (e.code === 'Escape') {\n    onCloseModalBtnClick();\n  }\n}\n\nfunction onModalCardBackdropClick(e) {\n  if (e.currentTarget === e.target) {\n    onCloseModalBtnClick();\n  }\n}\n\nfunction makingModalCardMarkup(obj) {\n  let imagePath = ``;\n  !obj.poster_path\n    ? (imagePath = `https://raw.githubusercontent.com/marvall/filmoteka/main/src/images/no-poster.png`)\n    : (imagePath = `${BASE_POSTER_URL}/${obj.poster_path}`);\n  const markup = `<div class=\"movie__container--left-side\">              \n                  <img class=\"movie__image\" src=\"${imagePath}\"\n                    alt=\"${obj.title || obj.name}\" /></div>\n            <div class=\"movie__container--rigth-side\">\n                <h2 class=\"movie__title\">${obj.title || obj.name}</h2>\n                <table class=\"movie__info\">\n                    <tbody>\n                        <tr class=\"movie__info-rows\">\n                            <td class=\"movie__info-name\" data-key=\"votes\">Vote / Votes</td>\n                            <td class=\"movie__info-rating\">\n                                <span class=\"movie__info-rating-value movie__info-rating--accent\">${setReleaseVote(\n                                  obj.vote_average\n                                )}</span>\n                                <span class=\"movie__info-rating-slash\">/</span>\n                                <span class=\"movie__info-rating-value\">${setReleaseVote(\n                                  obj.vote_count\n                                )}</span>\n                            </td>\n                        </tr>\n                        <tr class=\"movie__info-rows\">\n                            <td class=\"movie__info-name\" data-key=\"popularity\">Popularity</td>\n                            <td class=\"movie__info-numbers\">${\n                              obj.popularity\n                            }</td>\n                        </tr>\n                        <tr class=\"movie__info-rows\">\n                            <td class=\"movie__info-name\" data-key=\"originalTitle\">Original Title</td>\n                            <td class=\"movie__info-value\">${\n                              obj.original_title || obj.original_name\n                            }</td>\n                        </tr>\n                        <tr class=\"movie__info-rows movie__info-rows--last\">\n                            <td class=\"movie__info-name\" data-key=\"genre\">Genre</td>\n                            <td class=\"movie__info-value\">${\n                              gettingGenresListForModal(obj.genre_ids) ||\n                              'Genre not defined'\n                            }</td>\n                        </tr>\n                    </tbody>\n                </table>\n                <h2 class=\"movie__about-title\" data-key=\"about\">About</h2>\n                <p class=\"movie__about-text\">\n                    ${obj.overview || 'No text'}\n                </p>\n                <div class=\"movie__btn-container\">\n                   \n                    <button type=\"submit\" id=\"watched-btn\" data-id=\"${\n                      obj.id\n                    }\" class=\"movie__btn btn btn--accent\">ADD TO WATCHED\n                        </button>\n                    <button type=\"submit\" id=\"queue-btn\" data-id=\"${\n                      obj.id\n                    }\" class=\"movie__btn btn btn-queue\">ADD TO QUEUE\n                        </button>\n                </div>\n            </div>\n        </div>`;\n  return markup;\n}\n\nexport { makingModalCardMarkup };\n"],"names":["parcelRequire","$iSn7Y","$4Nugj","refs","libraryCardsContainer","addEventListener","e","target","nodeName","document","body","classList","add","window","$b4acff643dea45e3$var$modalCloseByEsc","currentId","dataset","id","unParsedCurrentArrayFilmsW","localStorage","getItem","unParsedCurrentArrayFilmsQ","parsedCurrentArrayFilmsW","JSON","parse","parsedCurrentArrayFilmsQ","libraryMovieWatched","find","obj","libraryMovieQueue","render","imagePath","poster_path","concat","$4QKg3","BASE_POSTER_URL","title","name","$h7AsZ","setReleaseVote","vote_average","vote_count","popularity","original_title","original_name","gettingGenresListForModal","genre_ids","overview","$3MGSC","translateItems","$j7yxE","insertModalMarkupHome","watchedBtn","querySelector","arrayFilmsWatched","w","arr","$cbazt","deleteWatched","addWatchedLocalStorage","$b4acff643dea45e3$var$style","$4uNB6","textModalBtn","queueBtn","arrayFilmsQueue","q","deleteQueue","addQueueLocalStorage","closeModalBtn","$b4acff643dea45e3$var$onCloseModalBtnClick","modalCardBackdrop","currentTarget","homeCardsContainer","removeEventListener","remove","modalCardContainer","innerHTML","code"],"version":3,"file":"library.90b0aa55.js.map"}